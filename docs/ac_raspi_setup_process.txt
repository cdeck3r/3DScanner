@startuml
skinparam monochrome true
skinparam componentStyle uml2

'
' customize image
'
| <&person>Developer |
start
:raspios_download.sh;
:mount root and boot
partition at /mnt;
:raspios_customize.sh;
|#AntiqueWhite|  RaspiOS Image |
:install booter.service;
:booter.sh|
stop

'
' Create autosetup scripts
'
| <&person>Developer |
start
:create_autosetup.sh;
:ssh keys and
NODETYPE definition|
| <&person>User |
:autosetup.zip|
stop

'
' Deploy autosetup scripts
'
| <&person>User |
start
:flash image 
onto SD card;
:copy autosetup.zip;
|  RaspiOS Image |
:autosetup.zip|
stop

'
' autosetup
'
|  RaspiOS Image |
partition "Booting Raspberry Pi" {
    start
    :booter.sh;
    :unzip autosetup.zip;
    :autosetup.sh;
    :install ssh keys;
    :download install scripts;
    | Repository |
    :<&folder>/raspi-autosetup|
    |  RaspiOS Image |
    :install_commons.sh;
    if (NODETYPE) then (CamNode)
    :install_camnode.sh;
    else (CentralNode)
    :install_centralnode.sh;
    endif
    stop
}
@enduml